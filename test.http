@BASE = http://localhost:8080
# 로그인 후 받은 JWT 토큰으로 교체하세요
@TOKEN = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWk1bTFoOHMwMDAwbmd4Znh5b3pza2hpIiwiZW1haWwiOiJhaG5uZXVAbmF2ZXIuY29tIiwiaWF0IjoxNzYzNzE3NTgwLCJleHAiOjE3NjQzMjIzODB9.kLnovJJUTKhWHpbqyysdby2IPxnG5qPR0kZqEQBYfH0
# Prisma Studio 등에서 확인한 Room ID 로 교체하세요
@ROOM_ID = cmi8iuhf70000ngkj7yuc63z9
# 결제 세션 테스트 시 응답으로 받은 ID로 교체하세요
@PAYMENT_SESSION_ID = 8b5a8c9f-131c-46e6-8008-a329470ea8c2

### 회원가입 (로컬)
POST {{BASE}}/api/auth/signup
Content-Type: application/json

{
  "email": "ahnneu@naver.com",
  "password": "tkddk128!!",
  "nickname": "테스터"
}

### 로그인 (로컬)
POST {{BASE}}/api/auth/login
Content-Type: application/json

{
  "email": "ahnneu@naver.com",
  "password": "tkddk128!!"
}

### 내 정보 확인
GET {{BASE}}/api/me
Authorization: Bearer {{TOKEN}}

### 지갑 잔액 조회
GET {{BASE}}/api/wallet/balance
Authorization: Bearer {{TOKEN}}

### 지갑 충전 (topup)
POST {{BASE}}/api/wallet/topup
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "amount": 20000
}

### 결제 세션 생성 (지갑 충전용)
POST {{BASE}}/api/payments/mock/session
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "amount": 30000,
  "purpose": "wallet_topup"
}

### 결제 세션 목록
GET {{BASE}}/api/payments/mock/sessions
Authorization: Bearer {{TOKEN}}

### 결제 세션 확정(성공)
POST {{BASE}}/api/payments/mock/session/{{PAYMENT_SESSION_ID}}/confirm
Authorization: Bearer {{TOKEN}}

### 방 배차 시 예치금 홀드 (1/n)
POST {{BASE}}/api/settlements/rooms/{{ROOM_ID}}/hold
Authorization: Bearer {{TOKEN}}

### 하차 시 최종 정산 (실요금 입력)
POST {{BASE}}/api/settlements/rooms/{{ROOM_ID}}/finalize
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "actualFare": 62000
}

### 목업 결제 내역 조회
GET {{BASE}}/api/payments/mock
Authorization: Bearer {{TOKEN}}

### 목업 결제 강제 생성 (테스트용)
POST {{BASE}}/api/payments/mock/charge
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "amount": 30000,
  "currency": "KRW",
  "metadata": {
    "note": "manual-test"
  }
}

### 알림 목록 조회
GET {{BASE}}/api/notifications
Authorization: Bearer {{TOKEN}}

### 알림 테스트 발송
POST {{BASE}}/api/notifications/test
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "title": "테스트 알림",
  "body": "테스트 메시지입니다."
}

### 후기 작성
POST {{BASE}}/api/reviews
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "roomId": "{{ROOM_ID}}",
  "rating": 5,
  "comment": "방 좋아요!"
}

### 방 후기 목록
GET {{BASE}}/api/reviews/room/{{ROOM_ID}}
Authorization: Bearer {{TOKEN}}

### 신고 작성
POST {{BASE}}/api/reports
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "roomId": "{{ROOM_ID}}",
  "reportedSeatNumber": 2,
  "message": "노쇼 발생"
}

### 내 신고 목록
GET {{BASE}}/api/reports/me
Authorization: Bearer {{TOKEN}}

### 1. 방 생성 (로컬)
### - JWT는 위에서 로그인 해서 직접 복사해 넣기 (@JWT 갱신 필수!)
POST {{BASE}}/api/rooms
Authorization: Bearer {{TOKEN}}
Content-Type: application/json

{
  "title": "전북대 → 시외버스터미널",
  "departureLabel": "전북대 구정문",
  "departureLat": 35.846100,
  "departureLng": 127.129100,
  "arrivalLabel": "전주 시외버스터미널",
  "arrivalLat": 35.825000,
  "arrivalLng": 127.148000,
  "departureTime": "2025-11-20T15:30:00.000Z",
  "capacity": 4,
  "priority": "time",
  "estimatedFare": 12000
}

### 알림 뜨게 하기
POST http://localhost:8080/api/notifications/test
Authorization: Bearer {{TOKEN}}
Content-Type: application/json

{
  "title": "배차 완료",
  "body": "예상 금액으로 결제됐어요."
}